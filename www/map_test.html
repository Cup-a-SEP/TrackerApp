<!DOCTYPE html>
<html>
<head>
	<title>Map test</title>
	<script src="jquery-1.8.3.min.js"></script>
	<script src="OpenLayers/OpenLayers.mobile.js"></script>
	<style type="text/css">
		html, body {
			width: 100%;
			height: 100%;
			margin: 0;
		}
		
		#map {
			width: 75%;
			height: 75%;
			margin: 0 auto;
		}
	</style>
</head>
<body>
	<h1>Map test</h1>
	<div id="map"></div>
	<h1 id="speed">Speed:</h1>
	<script type="text/javascript">
		function Map(id)
		{
			this.map = new OpenLayers.Map(id);
			this.proj = {};
			this.proj.from = new OpenLayers.Projection("EPSG:4326");
			this.proj.to = new OpenLayers.Projection("EPSG:900913");
			this.layer = new OpenLayers.Layer.OSM();
			this.map.addLayer(this.layer);
		}
		
		Map.prototype.move = function(lng, lat)
		{
			this.map.setCenter(new OpenLayers.LonLat(lng,lat).transform(this.proj.from, this.proj.to), 18);
		}
		
		$(function()
		{
			var map = new Map('map');
			
			setInterval(function()
			{
				navigator.geolocation.getCurrentPosition(function(pos)
				{
					map.move(pos.coords.longitude, pos.coords.latitude);
					$('#speed').text('Speed: ' + pos.coords.speed + ' Alt: ' + pos.coords.altitude);
				});
			}, 1000);
		});
	</script>
</body>
</html>