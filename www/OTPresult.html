<!doctype html>
<html>
<head>
	<title>OTP test</title>

	<meta charset="utf-8"/>
	<script src="js/lib/prototype-1.7.1.js"></script>
	<script src="js/lib/jquery-1.8.3.min.js"></script>
	<script src="js/lib/jquery.json-2.4.min.js"></script>
	<script src="cordova.js"></script>
	<script src="js/system.js"></script>
	<script src="js/class/localdb.class.js"></script>
	<script src="js/storage.js"></script>
	<script src="js/geocode.js"></script>
	<script src="js/otp.js"></script>
	<script src="js/ui.js"></script>
	
	<link href="css/ui-lightness/jquery-ui-1.10.3.custom.css" rel="stylesheet">
	<script src="js/lib/jquery-ui-1.10.3.custom.min.js"></script>
</head>
<body>
	<div id="header">
		<span id="left">| <span id="back">&lt;</span> | <span id="fav">&hearts;</span> |</span>  
		<span id="center">Frits</span> 
		<span id="right">| O | <span id="vraagteken">?</span> |</span>
	</div>
	
	<section id="plan" style="margin-top: 3em">
	</section>
	
	<script src="js/init.js"></script>
	<script>
		
		$(function()
		{
			// Initialize database
			Storage.Trips.init();
			
			var req = $.evalJSON(localStorage['OTP request']);
			var data = $.evalJSON(localStorage['OTP data']);
			
			var route;
			$('#plan').empty().append(route = $('<div>').attr('id', 'route'));
			
			route.add = UI.addItinerary;
			route.add(data.itineraries[0]);
			route.accordion({collapsible:true});
			
			var legLength = data.itineraries[0].legs.length;
			
			for(var i = 0; i < legLength; ++i)
			{
				$('#legmap' + i).click(function()
				{
					clickMap(this.id.substring(6));
				});
			}
		});
		
		function clickMap(i)
		{
			localStorage['ShowMap'] = i;
			window.location = "legmap.html";
		}
	</script>
</body>
</html>