<!DOCTYPE html>
<html>

<head>
	<title>Frits</title>
	<meta charset="utf-8" />
	<!--<meta name="format-detection" content="telephone=no" />
	<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />-->
	<link rel="stylesheet" type="text/css" href="css/index.css" />
	<script src="js/lib/prototype-1.7.1.js"></script>
	<script src="js/lib/jquery-1.8.3.min.js"></script>
	<script type="text/javascript" src="cordova.js"></script>
	<script type="text/javascript" src="js/index.js"></script>
	<script src="js/class/localdb.class.js"></script>
	<!-- If this comment is removed the program will blow up -->
</head>
<body>
	<div id="header"><span id="left"><span id="back">&lt;</span></span>  
	<span id="center">Frits</span> 

	<span id="right"><span id="vraagteken">?</span></span></div>
	
	<div id="testReport" style="margin-top: 3em; font-size: 16px">
		Tests:
	</div>
	<script type="text/javascript">
		function testDB() {
			return new LocalDB(
				'test', 
				"CREATE TABLE IF NOT EXISTS `test`" + 
					"(`int` INTEGER, " + 
					"`text` TEXT, " +
					"`bool` BOOLEAN);",
				1
			);
		}
		
		var db = null;
		var result = null;
		
		function createDBTest() {
			db = testDB();
			return db != false;
		}
		
		function insertTestPass() {
			result = false;
			
			db.insert( { int: 0, text: 'TestInsert', bool: false} , 
				function(obj) {
					result = true;
				}
			);
			
			return result;
		}
		
		function insertTestFail() {
			result = true;

			db.insert( { int: 0, text: 'TestInsert', bool: false, failParam: 'Fail'} , 
				function(obj) {
					result = false;
				}
			);
			
			return result;
		}
		
		function removeTestPass() {
			result = false;
			
			db.insert( { int: 0, text: 'TestInsert', bool: false} , 
				function(obj) {
					db.remove( {})
				}
			);
		}
		
		function generateDBACTestReport(tests) {
			var result = '<table border="2">';
			$.each(tests, 
				function(i, e) {
					result = result + '<tr>' + 
					'<td>' + i + '</td>' + 
					'<td>' + e.name + '</td>' + 
					'<td>' + e.test() + '</td></tr>';
				}
			);
			
			return result + '</table>';
		}
		
		$(function()
		{
			var tests = [
			{
				name: 'Create', 
				test: createDBTest
			},
			{
				name: 'Insert Pass',
				test: insertTestPass
			},
			{
				name: 'Insert Fail',
				test: insertTestFail
			}/*,
			{
				name: 'Remove',
				test: removeTest
			},
			{
				name: 'Select One',
				test: selectOneTest
			},
			{
				name: 'Select Multiple',
				test: selectMultipleTest
			}*/
			];
			var report = generateDBACTestReport(tests);
			$('#testReport').append(report);
		}
		);
	</script>
</body>
</html>